\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


Python module for piloting the robot to the target.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{go__to__point_8py_a04ffbcfde094b7aa54f3327cf3be2755}\label{go__to__point_8py_a04ffbcfde094b7aa54f3327cf3be2755}} 
def {\bfseries go\+\_\+to\+\_\+point.\+Vel\+\_\+srv} (req)
\item 
\mbox{\Hypertarget{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}\label{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}} 
def {\bfseries go\+\_\+to\+\_\+point.\+clbk\+\_\+odom} (msg)
\item 
\mbox{\Hypertarget{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}\label{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}} 
def {\bfseries go\+\_\+to\+\_\+point.\+change\+\_\+state} (state)
\item 
\mbox{\Hypertarget{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}\label{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}} 
def {\bfseries go\+\_\+to\+\_\+point.\+normalize\+\_\+angle} (angle)
\item 
\mbox{\Hypertarget{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}\label{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}} 
def {\bfseries go\+\_\+to\+\_\+point.\+fix\+\_\+yaw} (des\+\_\+pos)
\item 
\mbox{\Hypertarget{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}\label{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}} 
def {\bfseries go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead} (des\+\_\+pos)
\item 
\mbox{\Hypertarget{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}\label{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}} 
def {\bfseries go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw} (des\+\_\+yaw)
\item 
\mbox{\Hypertarget{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}\label{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}} 
def {\bfseries go\+\_\+to\+\_\+point.\+done} ()
\item 
\mbox{\Hypertarget{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}\label{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}} 
def {\bfseries go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point} (goal)
\item 
\mbox{\Hypertarget{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}\label{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}} 
def {\bfseries go\+\_\+to\+\_\+point.\+main} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}{go\+\_\+to\+\_\+point.\+position\+\_\+}} = Point()
\begin{DoxyCompactList}\small\item\em Odometry callback. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a6d53ec90cd5e46f57f098363f19b2019}\label{go__to__point_8py_a6d53ec90cd5e46f57f098363f19b2019}} 
int \mbox{\hyperlink{go__to__point_8py_a6d53ec90cd5e46f57f098363f19b2019}{go\+\_\+to\+\_\+point.\+yaw\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em Point\+: actual robot position. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{go__to__point_8py_acf4a5bffa4335b456ad91661efa8ae4b}{go\+\_\+to\+\_\+point.\+state\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em Arguments\+: state (int) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}\label{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}} 
{\bfseries go\+\_\+to\+\_\+point.\+pub\+\_\+} = None
\item 
\mbox{\Hypertarget{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}\label{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}} 
{\bfseries go\+\_\+to\+\_\+point.\+act\+\_\+s} = None
\item 
\mbox{\Hypertarget{go__to__point_8py_a354fba5ca969f353a94d6131040611b9}\label{go__to__point_8py_a354fba5ca969f353a94d6131040611b9}} 
{\bfseries go\+\_\+to\+\_\+point.\+vel\+\_\+s} = None
\item 
\mbox{\Hypertarget{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}\label{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+} = math.\+pi / 9
\item 
\mbox{\Hypertarget{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}\label{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+} = math.\+pi / 90
\item 
\mbox{\Hypertarget{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}\label{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}} 
float {\bfseries go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+} = 0.\+1
\item 
\mbox{\Hypertarget{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}\label{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+a} = -\/3.\+0
\item 
\mbox{\Hypertarget{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}\label{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+d} = 0.\+2
\item 
\mbox{\Hypertarget{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}\label{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}} 
float {\bfseries go\+\_\+to\+\_\+point.\+ub\+\_\+a} = 0.\+6
\item 
\mbox{\Hypertarget{go__to__point_8py_afecad4058844db05d8321199e25b4498}\label{go__to__point_8py_afecad4058844db05d8321199e25b4498}} 
float {\bfseries go\+\_\+to\+\_\+point.\+lb\+\_\+a} = -\/0.\+5
\item 
\mbox{\Hypertarget{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}\label{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}} 
float {\bfseries go\+\_\+to\+\_\+point.\+ub\+\_\+d} = 0.\+6
\item 
tuple {\bfseries go\+\_\+to\+\_\+point.\+quaternion}
\item 
\mbox{\Hypertarget{go__to__point_8py_a22ae82a27c7d4ec081aec5fae83837be}\label{go__to__point_8py_a22ae82a27c7d4ec081aec5fae83837be}} 
{\bfseries go\+\_\+to\+\_\+point.\+euler} = transformations.\+euler\+\_\+from\+\_\+quaternion(quaternion)
\item 
\mbox{\hyperlink{go__to__point_8py_a8980aeeb4c665434719cc9fef0268505}{go\+\_\+to\+\_\+point.\+angle}} = angle -\/ (2 $\ast$ math.\+pi $\ast$ angle) / (math.\+fabs(angle))
\begin{DoxyCompactList}\small\item\em Arguments\+: float (angle) -\/$>$ input float (angle) -\/$>$ return ~\newline
 \end{DoxyCompactList}\item 
\mbox{\hyperlink{go__to__point_8py_ae0061292741c7ad2a80f6bf7d8d7a76c}{go\+\_\+to\+\_\+point.\+desired\+\_\+yaw}} = math.\+atan2(des\+\_\+pos.\+y -\/ position\+\_\+.\+y, des\+\_\+pos.\+x -\/ position\+\_\+.\+x)
\begin{DoxyCompactList}\small\item\em Arguments\+: float (des\+\_\+yaw) int (next\+\_\+state) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a08a0546d5e969dabc96a01fc27212d9d}\label{go__to__point_8py_a08a0546d5e969dabc96a01fc27212d9d}} 
def {\bfseries go\+\_\+to\+\_\+point.\+err\+\_\+yaw} = normalize\+\_\+angle(desired\+\_\+yaw -\/ yaw\+\_\+)
\item 
\mbox{\hyperlink{go__to__point_8py_aaa0345cea167437ea6a05b02470bafe2}{go\+\_\+to\+\_\+point.\+twist\+\_\+msg}} = Twist()
\begin{DoxyCompactList}\small\item\em Description\+: Stop the robot setting both angular and linear velocity to 0. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a2fd68a76b8583598a4bceccdeae5d73b}\label{go__to__point_8py_a2fd68a76b8583598a4bceccdeae5d73b}} 
{\bfseries go\+\_\+to\+\_\+point.\+z}
\item 
{\bfseries go\+\_\+to\+\_\+point.\+err\+\_\+pos}
\item 
\mbox{\Hypertarget{go__to__point_8py_a328c9a3bb9322f150f2e67371cd73306}\label{go__to__point_8py_a328c9a3bb9322f150f2e67371cd73306}} 
{\bfseries go\+\_\+to\+\_\+point.\+x}
\item 
\mbox{\hyperlink{go__to__point_8py_a803f37d88a98fcb432b07c5f1366d924}{go\+\_\+to\+\_\+point.\+desired\+\_\+position}} = Point()
\begin{DoxyCompactList}\small\item\em Arguments\+: goal position (goal) for x, y and theta. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_ac372e1a492f9aa66d29f365cc1c57d8c}\label{go__to__point_8py_ac372e1a492f9aa66d29f365cc1c57d8c}} 
{\bfseries go\+\_\+to\+\_\+point.\+y}
\item 
\mbox{\Hypertarget{go__to__point_8py_afb6f136299609da8342072667ac99fc3}\label{go__to__point_8py_afb6f136299609da8342072667ac99fc3}} 
{\bfseries go\+\_\+to\+\_\+point.\+des\+\_\+yaw} = goal.\+theta
\item 
\mbox{\Hypertarget{go__to__point_8py_ae54b9db8e838e00fa1addf56c511d670}\label{go__to__point_8py_ae54b9db8e838e00fa1addf56c511d670}} 
{\bfseries go\+\_\+to\+\_\+point.\+rate} = rospy.\+Rate(20)
\item 
\mbox{\Hypertarget{go__to__point_8py_a9a8e716afc6dc6658381982f8d9bfe42}\label{go__to__point_8py_a9a8e716afc6dc6658381982f8d9bfe42}} 
bool {\bfseries go\+\_\+to\+\_\+point.\+objective} = True
\item 
\mbox{\Hypertarget{go__to__point_8py_aef2e9fd6df834ec234239da39481a0c7}\label{go__to__point_8py_aef2e9fd6df834ec234239da39481a0c7}} 
{\bfseries go\+\_\+to\+\_\+point.\+feedback} = rt2\+\_\+assignment1.\+msg.\+Assignment1\+Feedback()
\item 
\mbox{\Hypertarget{go__to__point_8py_a98ce19d0c843fd1cb438e6630ae107c2}\label{go__to__point_8py_a98ce19d0c843fd1cb438e6630ae107c2}} 
{\bfseries go\+\_\+to\+\_\+point.\+result} = rt2\+\_\+assignment1.\+msg.\+Assignment1\+Result()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Python module for piloting the robot to the target. 

\begin{DoxyAuthor}{Author}
Anderson Siqueira de Andrade 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
03/08/2021
\end{DoxyDate}
Servers\+: Action\+: ~\newline
 /go\+\_\+to\+\_\+point (rt2\+\_\+assignment1.\+action.\+Assignment1\+Action) Service\+: ~\newline
 /vel (rt2\+\_\+assignment1.\+srv.\+Velocity) Publishes to\+: ~\newline
 /cmd\+\_\+vel (geometry\+\_\+msgs.\+msg.\+Twist) 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{go__to__point_8py_a8980aeeb4c665434719cc9fef0268505}\label{go__to__point_8py_a8980aeeb4c665434719cc9fef0268505}} 
\index{go\_to\_point.py@{go\_to\_point.py}!angle@{angle}}
\index{angle@{angle}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{angle}{angle}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+angle = angle -\/ (2 $\ast$ math.\+pi $\ast$ angle) / (math.\+fabs(angle))}



Arguments\+: float (angle) -\/$>$ input float (angle) -\/$>$ return ~\newline
 

Description\+: Normalize the angle between pi and -\/pi \mbox{\Hypertarget{go__to__point_8py_a803f37d88a98fcb432b07c5f1366d924}\label{go__to__point_8py_a803f37d88a98fcb432b07c5f1366d924}} 
\index{go\_to\_point.py@{go\_to\_point.py}!desired\_position@{desired\_position}}
\index{desired\_position@{desired\_position}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{desired\_position}{desired\_position}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+desired\+\_\+position = Point()}



Arguments\+: goal position (goal) for x, y and theta. 

Description\+: Set an action deppending on the robot actual state. Direct communication with the state machine code, it will run in a loop until the user cancel/preempt the action \mbox{\Hypertarget{go__to__point_8py_ae0061292741c7ad2a80f6bf7d8d7a76c}\label{go__to__point_8py_ae0061292741c7ad2a80f6bf7d8d7a76c}} 
\index{go\_to\_point.py@{go\_to\_point.py}!desired\_yaw@{desired\_yaw}}
\index{desired\_yaw@{desired\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{desired\_yaw}{desired\_yaw}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+desired\+\_\+yaw = math.\+atan2(des\+\_\+pos.\+y -\/ position\+\_\+.\+y, des\+\_\+pos.\+x -\/ position\+\_\+.\+x)}



Arguments\+: float (des\+\_\+yaw) int (next\+\_\+state) 

Arguments\+: point (des\+\_\+pos) position (desired\+\_\+) for x, y.

Description\+: Orient the robot in direction of goal position (x,y) or achieve it. It can also change to a new state depending of the actual orientation. ~\newline


Description\+: ~\newline
 Set both angular and linear speed depending on the distance between the robot the goal \mbox{\Hypertarget{go__to__point_8py_a2e88fa298379599e5382bbfe30edf0af}\label{go__to__point_8py_a2e88fa298379599e5382bbfe30edf0af}} 
\index{go\_to\_point.py@{go\_to\_point.py}!err\_pos@{err\_pos}}
\index{err\_pos@{err\_pos}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{err\_pos}{err\_pos}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+err\+\_\+pos}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  math.sqrt(pow(des\_pos.y -\/ position\_.y, 2) +}
\DoxyCodeLine{2                         pow(des\_pos.x -\/ position\_.x, 2))}

\end{DoxyCode}
\mbox{\Hypertarget{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}\label{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}} 
\index{go\_to\_point.py@{go\_to\_point.py}!position\_@{position\_}}
\index{position\_@{position\_}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{position\_}{position\_}}
{\footnotesize\ttfamily int go\+\_\+to\+\_\+point.\+position\+\_\+ = Point()}



Odometry callback. 

Arguments\+: Odometry message (msg)

Description\+: Receives from Odometry message the values of X, Y and theta \mbox{\Hypertarget{go__to__point_8py_af07d5616dcc86c42f73b6a21dda5f29f}\label{go__to__point_8py_af07d5616dcc86c42f73b6a21dda5f29f}} 
\index{go\_to\_point.py@{go\_to\_point.py}!quaternion@{quaternion}}
\index{quaternion@{quaternion}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{quaternion}{quaternion}}
{\footnotesize\ttfamily tuple go\+\_\+to\+\_\+point.\+quaternion}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  (}
\DoxyCodeLine{2         msg.pose.pose.orientation.x,}
\DoxyCodeLine{3         msg.pose.pose.orientation.y,}
\DoxyCodeLine{4         msg.pose.pose.orientation.z,}
\DoxyCodeLine{5         msg.pose.pose.orientation.w)}

\end{DoxyCode}
\mbox{\Hypertarget{go__to__point_8py_acf4a5bffa4335b456ad91661efa8ae4b}\label{go__to__point_8py_acf4a5bffa4335b456ad91661efa8ae4b}} 
\index{go\_to\_point.py@{go\_to\_point.py}!state\_@{state\_}}
\index{state\_@{state\_}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{state\_}{state\_}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+state\+\_\+ = 0}



Arguments\+: state (int) 

Description\+: Update the global state \mbox{\Hypertarget{go__to__point_8py_aaa0345cea167437ea6a05b02470bafe2}\label{go__to__point_8py_aaa0345cea167437ea6a05b02470bafe2}} 
\index{go\_to\_point.py@{go\_to\_point.py}!twist\_msg@{twist\_msg}}
\index{twist\_msg@{twist\_msg}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{twist\_msg}{twist\_msg}}
{\footnotesize\ttfamily go\+\_\+to\+\_\+point.\+twist\+\_\+msg = Twist()}



Description\+: Stop the robot setting both angular and linear velocity to 0. 

